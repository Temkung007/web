<!-- Navigation -->
<%- include('../layout/navbar'); %>
    <!-- Page Header -->
    <%- include('../layout/header'); %>
        <link rel="stylesheet" href="/assets/extensions/quill/quill.snow.css">
        <link rel="stylesheet" href="/assets/extensions/quill/quill.bubble.css">

        <div class="container mt-3">
            <div class="text-center">
                <h1>Post</h1>
            </div>
            <div>
                <% if(messages.error) { %>
                    <div class="alert alert-danger" role="alert">
                        <%= messages.error %>
                    </div>
                    <% } %>
                        <% if(messages.success) { %>
                            <div class="alert alert-success" role="alert">
                                <%= messages.success %>
                            </div>
                            <% } %>
                                <form>
                                    <div class="form-group mt-3 mb-3">
                                        <label for="exampleInputEmail1">Title</label>
                                        <input type="text" class="form-control" id="title" aria-describedby="emailHelp" name="title" placeholder="title">
                                    </div>
                                    <div class="form-group mt-3 mb-3">
                                        <label for="exampleInputEmail1">Category</label>
                                        <input type="text" class="form-control" id="category" aria-describedby="emailHelp" name="category" placeholder="category">
                                    </div>
                                    <div class="form-group mt-3 mb-3">
                                        <label for="exampleInputEmail1">Description</label>
                                        <input type="text" class="form-control" id="description" aria-describedby="emailHelp" name="description" placeholder="description">
                                    </div>
                                    <div class="form-group mt-3 mb-3">
                                        <div id="full">

                                        </div>
                                    </div>
                                    <div class="form-group mb-5">
                                        <button type="button" onclick="cc_click()" class="btn btn-primary">POST</button>
                                    </div>
                                </form>
            </div>

        </div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js" integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="/assets/extensions/quill/quill.min.js"></script>
        <script src="/assets/js/pages/quill.js"></script>
        <script>
            const cc_click = () => {

                let title = document.getElementById("title").value;
                let description = document.getElementById("description").value;
                let category = document.getElementById("category").value;
                if (title != null && description != null && category != null) {
                    var delta = full.getContents();
                    let data = JSON.stringify(delta);

                    $.ajax({
                        type: "POST",
                        url: "/add-post",
                        data: {
                            "data": data,
                            "title": title,
                            "description": description,
                            "category": category
                        },
                        dataType: "",
                        success: window.location.href = "/post-image/" + title,
                    });
                }

            }
        </script>

        <!-- Footer -->
        <%- include('../layout/footer'); %>